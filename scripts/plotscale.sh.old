#INITIALIZE ARRAY - make sure array matches that used in scale.sh
#for ((i=4; i<10; i++)); do THR[$(($i-3))]=`echo "2^$i"|bc`; done       #increasing powers of 2
#for ((i=4; i<=20; i++)); do THR[$(($i-3))]=`echo "$i^2"|bc`; done       #perfect squares


#CREATE OUTPUT FILE TO BE PLOTTED
#for ((i=1; i<=${#THR[@]}; i++)); do

#   WALLTIME=`sed -n -e 's/^Resources Used:.*walltime=//p' 16384scale$i.out`

#  TIME=`TZ=utc date -d "1970-01-01 $WALLTIME" +%s`
#    echo ${THR[$i]}" "$TIME
#    done > 16384data.out

#PLOT OUTPUT FILE
echo "set title 'No. threads vs. walltime'
set xlabel 'No. threads'
set ylabel 'Log Walltime (s)'
#set yrange [0:21000]
set logscale y
#set term dumb 100 50 
set terminal jpeg size 1024,768
set output 'all-data.jpg'
plot '4096data.out' using 1:2 lt 1 pt 4 ps 2 with linespoints title '4096',\
     '8192data.out' using 1:2 lt 2 pt 5 ps 2 with linespoints title '8192',\
    '16384data.out' using 1:2 lt 3 pt 6 ps 2 with linespoints title '16384'" | gnuplot
